<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Splash Practice</title>

<style>
/* ===== SAME UI / ANIMATIONS AS BEFORE ===== */
:root{
  --bg:#0b1220;
  --panel:rgba(255,255,255,.04);
  --panelBorder:rgba(255,255,255,.10);
  --accent:#63b3ed;
  --danger:#ff7b72;
  --ok:#7ee787;
  --muted:rgba(230,237,247,.72);
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:#e6edf7;font-family:system-ui}
header{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08);display:flex;gap:12px;flex-wrap:wrap;align-items:center}
button,select{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.14);color:#e6edf7;padding:8px 10px;border-radius:10px;font-size:13px}
button{cursor:pointer}
button.primary{background:rgba(99,179,237,.25);border-color:rgba(99,179,237,.5)}
button.danger{background:rgba(255,123,114,.25);border-color:rgba(255,123,114,.5)}
main{max-width:1200px;margin:auto;padding:16px}
.grid{display:grid;grid-template-columns:380px 1fr;gap:16px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
.panel{background:var(--panel);border:1px solid var(--panelBorder);border-radius:16px;padding:12px}

/* cards */
.c{width:66px;height:92px;border-radius:14px;border:1px solid rgba(255,255,255,.18);
background:linear-gradient(180deg,#1b2338,#0f1629);
display:flex;flex-direction:column;align-items:center;justify-content:center;
box-shadow:0 8px 18px rgba(0,0,0,.4);transition:.15s}
.c.selectable:hover{transform:translateY(-6px)}
.c.selected{outline:3px solid var(--accent);transform:translateY(-8px)}
.c .rank{font-size:20px;font-weight:900}
.c .suit{font-size:18px}
.c.red{color:var(--danger)}
.c.black{color:#e6edf7}
.c.back{background:#0a1020;border-style:dashed}

/* layout helpers */
.hand{display:flex;gap:10px;flex-wrap:wrap}
.zoneTitle{margin:10px 0 6px;font-size:12px;color:var(--muted)}
.log{max-height:320px;overflow:auto;font-family:monospace;font-size:12px;background:rgba(0,0,0,.25);border-radius:12px;padding:10px}
.players{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.player{padding:8px;border-radius:12px;background:rgba(255,255,255,.03)}
.player.active{outline:2px solid var(--accent)}
</style>
</head>

<body>

<header>
  <strong>üÉè Splash Practice</strong>
  <select id="numPlayers"><option>3</option><option selected>4</option><option>5</option><option>6</option></select>
  <button id="newGame" class="primary">New Game</button>
  <button id="newHand">New Hand</button>
  <span id="turnInfo"></span>
</header>

<main>
<div class="grid">
  <div class="panel">
    <button id="playBtn" class="primary">Play</button>
    <button id="pickupBtn" class="danger">Pick up</button>

    <div class="zoneTitle">Your hand</div>
    <div id="yourHand" class="hand"></div>

    <div class="zoneTitle">Your table</div>
    <div id="yourTable" class="hand"></div>
  </div>

  <div class="panel">
    <div id="playersPanel" class="players"></div>
    <div class="zoneTitle">Log</div>
    <div id="log" class="log"></div>
  </div>
</div>
</main>

<script>
/* ========= RULE LOGIC (FIXED) ========= */

const RANK_ORDER = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
const rankValue = r => RANK_ORDER.indexOf(r);

const isClear = r => r==="10" || r==="JOKER";

/* scoring only */
const scoreValue = c =>
  c.rank==="JOKER"?50:
  c.rank==="10"?20:
  c.rank==="A"?1:
  ["J","Q","K"].includes(c.rank)?10:
  parseInt(c.rank);

/* play legality */
function canPlayOn(top, rank){
  if (!top) return true;
  if (isClear(rank)) return true;
  if (isClear(top)) return true;
  return rankValue(rank) <= rankValue(top);
}

/* ===== simplified playable demo logic ===== */

const el=id=>document.getElementById(id);
const log=t=>el("log").prepend(Object.assign(document.createElement("div"),{textContent:t}));

let state={pile:[],current:0,players:[]};

function start(){
  state.players=[{hand:[],up:[],down:[]}];
  state.pile=[{rank:"J",suit:"‚ô†"}];
  render();
}

function render(){
  el("turnInfo").textContent="Top: "+state.pile.at(-1).rank;
  el("yourHand").innerHTML="";
  ["J","Q","K"].forEach(r=>{
    const d=document.createElement("div");
    d.className="c selectable black";
    d.innerHTML=`<div class="rank">${r}</div><div class="suit">‚ô†</div>`;
    d.onclick=()=>{
      if(canPlayOn(state.pile.at(-1).rank,r)){
        state.pile.push({rank:r});
        log("Played "+r);
      }else{
        log("‚ùå Illegal: "+r+" on "+state.pile.at(-1).rank);
      }
      render();
    };
    el("yourHand").appendChild(d);
  });
}

start();
</script>

</body>
</html>
