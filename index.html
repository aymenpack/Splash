<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Splash ‚Äì Practice</title>

<style>
:root {
  --bg:#0b1220;
  --panel:#121a30;
  --panel2:#0f1629;
  --accent:#63b3ed;
  --danger:#ff7b72;
  --ok:#7ee787;
}

* { box-sizing:border-box; }

body {
  margin:0;
  background:var(--bg);
  color:#e6edf7;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

/* ---------- HEADER ---------- */
header {
  padding:14px 18px;
  border-bottom:1px solid rgba(255,255,255,.08);
  display:flex;
  gap:14px;
  align-items:center;
  flex-wrap:wrap;
}

header h1 {
  margin:0;
  font-size:18px;
  font-weight:800;
}

select, button {
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
  color:#e6edf7;
  padding:8px 12px;
  border-radius:10px;
  font-size:13px;
}

button { cursor:pointer; }

button.primary {
  background:rgba(99,179,237,.25);
  border-color:rgba(99,179,237,.5);
}

button.danger {
  background:rgba(255,123,114,.25);
  border-color:rgba(255,123,114,.5);
}

button:disabled {
  opacity:.45;
  cursor:not-allowed;
}

/* ---------- LAYOUT ---------- */
main {
  max-width:1300px;
  margin:0 auto;
  padding:16px;
}

.grid {
  display:grid;
  grid-template-columns:420px 1fr;
  gap:16px;
}

@media (max-width:1000px){
  .grid { grid-template-columns:1fr; }
}

.panel {
  background:var(--panel);
  border:1px solid rgba(255,255,255,.1);
  border-radius:18px;
  padding:14px;
}

.muted {
  color:rgba(230,237,247,.7);
  font-size:12px;
}

/* ---------- CARDS ---------- */
.card {
  width:66px;
  height:92px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  background:linear-gradient(180deg,#1b2338,#0f1629);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  box-shadow:0 6px 14px rgba(0,0,0,.4);
  transition:.15s ease;
  user-select:none;
}

.card.selectable:hover {
  transform:translateY(-6px);
  box-shadow:0 14px 28px rgba(0,0,0,.55);
}

.card.selected {
  outline:3px solid var(--accent);
  transform:translateY(-8px);
  box-shadow:0 18px 36px rgba(99,179,237,.5);
}

.card .rank {
  font-size:20px;
  font-weight:900;
}

.card .suit {
  font-size:18px;
}

.card.red { color:var(--danger); }
.card.black { color:#e6edf7; }

.card.back {
  background:linear-gradient(180deg,#0d1324,#060b16);
  border-style:dashed;
}

/* ---------- ZONES ---------- */
.zone {
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.zone-title {
  margin:12px 0 6px;
  font-size:13px;
  font-weight:700;
  display:flex;
  justify-content:space-between;
}

/* ---------- PILE ---------- */
.pile-visual {
  display:flex;
  position:relative;
  height:110px;
  margin-top:10px;
}

.pile-visual .card {
  position:absolute;
  left:0;
}

/* ---------- PLAYERS ---------- */
.players {
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
}

.player {
  padding:10px;
  border-radius:14px;
  background:var(--panel2);
  border:1px solid rgba(255,255,255,.1);
}

.player.active {
  outline:2px solid var(--accent);
}

.player h3 {
  margin:0;
  font-size:13px;
  display:flex;
  justify-content:space-between;
}

/* ---------- LOG ---------- */
.log {
  background:rgba(0,0,0,.3);
  border:1px solid rgba(255,255,255,.12);
  border-radius:14px;
  padding:10px;
  max-height:340px;
  overflow:auto;
  font-family:ui-monospace,Menlo,monospace;
  font-size:12px;
}
.log div { margin-bottom:4px; }

/* ---------- ACTIONS ---------- */
.actions {
  display:flex;
  gap:8px;
  margin-bottom:10px;
}
</style>
</head>

<body>

<header>
  <h1>üÉè Splash ‚Äì Practice</h1>

  <label class="muted">Players</label>
  <select id="numPlayers">
    <option>3</option>
    <option selected>4</option>
    <option>5</option>
    <option>6</option>
  </select>

  <button id="newGame" class="primary">New Game</button>
  <button id="newHand">New Hand</button>

  <span class="muted" id="handInfo">Hand 1 / 5</span>
  <span class="muted" id="turnInfo">Turn: ‚Äî</span>
</header>

<main>
  <div class="grid">

    <!-- LEFT PANEL -->
    <div class="panel">

      <div class="actions">
        <button id="playBtn" class="primary">Play</button>
        <button id="pickupBtn" class="danger">Pick Up</button>
        <button id="hintBtn">Hint</button>
      </div>

      <div class="muted">
        Top value: <strong id="topValue">‚Äî</strong> ¬∑
        Draw: <span id="drawCount">‚Äî</span> ¬∑
        Discard: <span id="discardCount">‚Äî</span>
      </div>

      <div class="pile-visual" id="pileVisual"></div>

      <div class="zone-title">
        <span>Your hand</span>
        <span class="muted">click to select</span>
      </div>
      <div class="zone" id="yourHand"></div>

      <div class="zone-title">
        <span>Your table</span>
        <span class="muted">face-down discovered on play</span>
      </div>
      <div class="zone" id="yourTable"></div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="panel">

      <div class="players" id="playersPanel"></div>

      <div class="zone-title">
        <span>Game log</span>
        <span class="muted">newest first</span>
      </div>
      <div class="log" id="log"></div>

    </div>

  </div>
</main>

<script>
/* ============================
   LOGIC (UNCHANGED)
   ============================ */

const SUITS=["‚ô†","‚ô•","‚ô¶","‚ô£"];
const RANKS=["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
let uid=0;
const id=()=>++uid+"";
const isJoker=c=>c.rank==="JOKER";
const isTenOrJoker=c=>c.rank==="10"||isJoker(c);
const playValue=r=>r==="A"?1:r==="J"||r==="Q"||r==="K"?10:parseInt(r)||10;
const scoreValue=c=>isJoker(c)?50:c.rank==="10"?20:c.rank==="A"?1:c.rank==="J"||c.rank==="Q"||c.rank==="K"?10:parseInt(c.rank);

const state={
  players:[],
  deck:[],
  discard:[],
  pile:[],
  mustPlayAny:false,
  current:0,
  hand:1,
  totalHands:5
};

const $=id=>document.getElementById(id);
const logEl=$("log");

function log(t){const d=document.createElement("div");d.textContent=t;logEl.prepend(d);}

function makeDeck(){
  const d=[];
  for(let k=0;k<2;k++)for(const s of SUITS)for(const r of RANKS)d.push({id:id(),rank:r,suit:s});
  for(let j=0;j<4;j++)d.push({id:id(),rank:"JOKER",suit:"‚òÖ"});
  for(let i=d.length-1;i;i--){const k=Math.floor(Math.random()*(i+1));[d[i],d[k]]=[d[k],d[i]];}
  return d;
}

/* ============================
   RENDERING
   ============================ */

function cardEl(c,selectable){
  const d=document.createElement("div");
  d.className="card"+(selectable?" selectable":"");
  if(c.rank!=="JOKER"){
    d.classList.add(c.suit==="‚ô•"||c.suit==="‚ô¶"?"red":"black");
  }
  d.innerHTML=`<div class="rank">${c.rank}</div><div class="suit">${c.suit}</div>`;
  return d;
}

function renderPile(){
  const pv=$("pileVisual");
  pv.innerHTML="";
  state.pile.slice(-5).forEach((c,i)=>{
    const d=cardEl(c,false);
    d.style.left=`${i*12}px`;
    d.style.top=`${i*3}px`;
    pv.appendChild(d);
  });
}

function render(){
  $("drawCount").textContent=state.deck.length;
  $("discardCount").textContent=state.discard.length;
  $("handInfo").textContent=`Hand ${state.hand} / ${state.totalHands}`;
  $("turnInfo").textContent=`Turn: ${state.current===0?"You":"Bot "+state.current}`;
  $("topValue").textContent=state.mustPlayAny?"ANY":(state.pile.at(-1)?.rank||"‚Äî");

  renderPile();
}

/* ============================
   START GAME
   ============================ */

$("newGame").onclick=()=>{
  state.players=Array.from({length:+$("numPlayers").value},(_,i)=>({
    hand:[],up:[null,null,null,null],down:[null,null,null,null],score:0
  }));
  state.hand=1;
  logEl.innerHTML="";
  startHand();
};

function startHand(){
  state.deck=makeDeck();
  state.discard=[];
  state.pile=[];
  state.mustPlayAny=false;
  state.current=0;

  state.players.forEach(p=>{
    for(let i=0;i<4;i++)p.down[i]=state.deck.pop();
    for(let i=0;i<4;i++)p.up[i]=state.deck.pop();
    p.hand=[];
    for(let i=0;i<11;i++)p.hand.push(state.deck.pop());
  });

  state.pile.push(state.deck.pop());
  log("New hand started");
  render();
}

$("newHand").onclick=startHand;

log("Ready. Click New Game.");
render();
</script>

</body>
</html>
